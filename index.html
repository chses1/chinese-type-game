<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>地球保衛戰</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
  <div class="chip">👨‍🎓 <span id="userChip">未登入</span></div>
  <div class="chip">分數 <b id="score">0</b></div>
  <div class="chip">時間 <b id="time">60</b>s</div>
  <button id="btnStart" class="chip" style="cursor:pointer">▶️ 開始 / 暫停</button>
  <button id="btnShowLeader" class="chip" style="cursor:pointer">🏆 排行榜</button>  <!-- NEW -->
  <button id="btnRestart" class="chip" style="cursor:pointer">🔄 重新開始</button>    <!-- NEW -->
  <div class="chip" id="chipHint">提示：點擊注音鍵擊落相同符號的隕石。</div>
</header>

<div id="gameWrap">
  <canvas id="gameCanvas" width="1280" height="720"></canvas>
</div>

<!-- 置中彈窗版本的排行榜（內容同舊版） -->
<div id="leader" hidden>
  <div>
    <table>
      <thead><tr><th>#</th><th>學號</th><th>最佳</th></tr></thead>
      <tbody id="leaderBody"></tbody>
    </table>
    <div style="margin-top:12px;display:flex;gap:10px;justify-content:center">
      <button id="btnRestartGame" class="tag">重新開始</button>
      <button id="btnCloseLeader" class="tag">關閉</button>
    </div>
  </div>
</div>

<div id="kbd"></div>

<!-- Result Modal -->
<div id="resultBox">
  <div id="resultCard">
    <h2>打字結果</h2>
    <table>
      <tr><td class="good">打對：</td><td id="resCorrect">0</td><td>字</td></tr>
      <tr><td class="bad">打錯：</td><td id="resWrong">0</td><td>字</td></tr>
      <tr><td>正確率：</td><td id="resAcc">0%</td><td></td></tr>
      <tr><td>速度：</td><td id="resSpeed">0</td><td>字/分</td></tr>
      <tr><td>升級資格：</td><td id="resPromo">—</td><td>(門檻 80%)</td></tr>
    </table>
    <button id="resultPrimaryBtn" class="primary">再玩一次</button>
  </div>
</div>

<!-- Login / teacher modal（保留，本機密碼 1070） -->
<div id="login">
  <div id="card">
    <h2 style="margin:0 0 8px">登入遊戲</h2>
    <p style="opacity:.85;margin:.2rem 0 .8rem">請輸入 <b>學號（5位數）</b>。</p>
    <label>學號</label>
    <input id="sid" placeholder="例如：30130" inputmode="numeric" maxlength="5" />
    <div class="rowBtns">
      <button id="go" class="primary">登入</button>
      <a id="teacherOpen" class="ghost" href="/teacher">教師後台</a>


<div class="toast" id="toast"></div>
<script src="main.js"></script>
</body>
</html>
